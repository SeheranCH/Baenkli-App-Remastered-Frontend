{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swesthauser\\\\Documents\\\\_D\\\\Workspace\\\\tbz\\\\Baenkli-App-Remastered-Frontend\\\\src\\\\components\\\\organisms\\\\ownTable\\\\OwnTable.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Paper, makeStyles, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Grid, IconButton } from '@material-ui/core/';\nimport SearchField from '../../molecules/searchField/SearchField';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport OwnDialog from '../../molecules/dialog/Dialog';\nimport UserService from '../../../service/UserService';\n/*\r\n    Style\r\n*/\n\nconst useStyles = makeStyles(theme => ({\n  table: {},\n  cell: {\n    color: \"#355A20\",\n    margin: \"20px\",\n    width: \"100px\"\n  },\n  searchField: {\n    marginTop: \"10px\",\n    marginBottom: \"20px\"\n  },\n  styleIcon: {\n    color: \"#355A20\"\n  }\n}));\n\nconst OwnTable = ({\n  data,\n  headCells,\n  userHandler\n}) => {\n  const [searchText, setSearchText] = useState('');\n  const [filteredRows, setFilteredRows] = useState([]);\n  const [openDelete, setOpenDelete] = useState(false);\n  const [itemToDelete, setItemToDelete] = useState({});\n  const [openEdit, setOpenEdit] = useState(false);\n  const [itemToEdit, setItemToEdit] = useState({});\n  const classes = useStyles();\n\n  const dialogHandlerDelete = () => {\n    setOpenDelete(!openDelete);\n  };\n\n  const dialogHandlerEdit = () => {\n    setOpenEdit(!openEdit);\n  };\n\n  const deleteUser = () => {\n    UserService.delete(itemToDelete.id).then(() => {\n      let newArray = data.filter(u => u.id !== itemToDelete.id);\n      userHandler(newArray);\n    }).catch(err => {\n      console.error(\"Error in OwnTable: \", err);\n    }).finally(() => {\n      dialogHandlerDelete();\n    });\n  };\n\n  const changeUser = dto => {\n    UserService.update(dto.id, dto).then(res => {\n      let newUser = res.data;\n      delete newUser.password;\n      let userArray = data.filter(b => b.id !== itemToEdit.id);\n      userArray.push(newUser);\n      userHandler(userArray);\n    }).catch(err => {\n      console.error('Error in OwnTable: ', err);\n    }).finally(() => {\n      dialogHandlerEdit();\n    });\n  };\n  /*\r\n      Filter\r\n  */\n\n\n  const filter = useCallback((value, filterValue) => {\n    let valueString = \"\";\n    Object.values(value).forEach(value => {\n      valueString += value;\n    });\n    const filterString = filterValue.replace(\" \", \"\");\n    return valueString.toLocaleLowerCase().includes(filterString.toLocaleLowerCase()); // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    const filteredRows = data.filter(value => filter(value, searchText));\n    setFilteredRows(filteredRows); // eslint-disable-next-line\n  }, [searchText, data, filter]);\n  return /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SearchField, {\n    searchText: searchText,\n    setSearchText: setSearchText,\n    style: classes.searchField,\n    styleIcon: classes.styleIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, headCells.map(headCell => /*#__PURE__*/React.createElement(TableCell, {\n    align: \"inherit\",\n    className: classes.cell,\n    padding: \"checkbox\",\n    size: \"medium\",\n    sortDirection: \"desc\",\n    variant: \"head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 41\n    }\n  }, headCell.label))))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, filteredRows.map(row => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 37\n      }\n    }, Object.values(row).map(value => {\n      if (value.length >= 30) {\n        return /*#__PURE__*/React.createElement(TableCell, {\n          className: classes.headCell,\n          title: value,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 53\n          }\n        }, value.substring(0, 12) + \"...\");\n      } else {\n        return /*#__PURE__*/React.createElement(TableCell, {\n          className: classes.headCell,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 53\n          }\n        }, value);\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"edit\",\n      onClick: () => {\n        setItemToEdit(row);\n        dialogHandlerEdit();\n      },\n      edge: \"end\",\n      title: \"Edit user \" + row.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      style: {\n        color: \"#355A20\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"delete\",\n      onClick: () => {\n        setItemToDelete(row);\n        dialogHandlerDelete();\n      },\n      edge: \"end\",\n      title: \"Delete user \" + row.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 45\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(OwnDialog, {\n    isOpen: openDelete,\n    handler: dialogHandlerDelete,\n    mode: 'delete',\n    titleDialog: \"Delete user '\" + itemToDelete.username + \"'?\",\n    action: deleteUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(OwnDialog, {\n    isOpen: openEdit,\n    handler: dialogHandlerEdit,\n    mode: 'editUser',\n    titleDialog: \"Edit user '\" + itemToEdit.username + \"'\",\n    action: changeUser,\n    user: itemToEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default OwnTable;","map":{"version":3,"sources":["C:/Users/swesthauser/Documents/_D/Workspace/tbz/Baenkli-App-Remastered-Frontend/src/components/organisms/ownTable/OwnTable.js"],"names":["React","useState","useEffect","useCallback","Paper","makeStyles","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","Grid","IconButton","SearchField","EditIcon","DeleteIcon","OwnDialog","UserService","useStyles","theme","table","cell","color","margin","width","searchField","marginTop","marginBottom","styleIcon","OwnTable","data","headCells","userHandler","searchText","setSearchText","filteredRows","setFilteredRows","openDelete","setOpenDelete","itemToDelete","setItemToDelete","openEdit","setOpenEdit","itemToEdit","setItemToEdit","classes","dialogHandlerDelete","dialogHandlerEdit","deleteUser","delete","id","then","newArray","filter","u","catch","err","console","error","finally","changeUser","dto","update","res","newUser","password","userArray","b","push","value","filterValue","valueString","Object","values","forEach","filterString","replace","toLocaleLowerCase","includes","map","headCell","label","row","length","substring","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Paper, makeStyles, TableContainer, Table, TableHead, TableRow, TableCell, TableBody, Grid, IconButton } from '@material-ui/core/';\r\nimport SearchField from '../../molecules/searchField/SearchField'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport OwnDialog from '../../molecules/dialog/Dialog';\r\nimport UserService from '../../../service/UserService';\r\n\r\n\r\n/*\r\n    Style\r\n*/\r\nconst useStyles = makeStyles((theme) => ({\r\n    table: {\r\n    },\r\n    cell: {\r\n        color: \"#355A20\",\r\n        margin: \"20px\",\r\n        width: \"100px\"\r\n    },\r\n    searchField: {\r\n        marginTop: \"10px\",\r\n        marginBottom: \"20px\"\r\n    },\r\n    styleIcon: {\r\n        color: \"#355A20\"\r\n    },\r\n}));\r\n\r\nconst OwnTable = ({ data, headCells, userHandler }) => {\r\n\r\n    const [searchText, setSearchText] = useState('');\r\n    const [filteredRows, setFilteredRows] = useState([]);\r\n\r\n    const [openDelete, setOpenDelete] = useState(false);\r\n    const [itemToDelete, setItemToDelete] = useState({});\r\n\r\n    const [openEdit, setOpenEdit] = useState(false);\r\n    const [itemToEdit, setItemToEdit] = useState({});\r\n\r\n    const classes = useStyles();\r\n\r\n    const dialogHandlerDelete = () => {\r\n        setOpenDelete(!openDelete);\r\n    }\r\n\r\n    const dialogHandlerEdit = () => {\r\n        setOpenEdit(!openEdit);\r\n    }\r\n\r\n    const deleteUser = () => {\r\n        UserService.delete(itemToDelete.id)\r\n            .then(() => {\r\n                let newArray = data.filter(u => u.id !== itemToDelete.id);\r\n                userHandler(newArray);\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Error in OwnTable: \", err);\r\n            })\r\n            .finally(() => {\r\n                dialogHandlerDelete();\r\n            });\r\n    };\r\n\r\n    const changeUser = (dto) => {\r\n        UserService.update(dto.id, dto)\r\n            .then(res => {\r\n                let newUser = res.data;\r\n                delete newUser.password;\r\n                let userArray = data.filter(b => b.id !== itemToEdit.id);\r\n                userArray.push(newUser);\r\n                userHandler(userArray);\r\n            })\r\n            .catch(err => {\r\n                console.error('Error in OwnTable: ', err)\r\n            })\r\n            .finally(() => {\r\n                dialogHandlerEdit();\r\n            })\r\n    }\r\n\r\n\r\n    /*\r\n        Filter\r\n    */\r\n    const filter = useCallback((value, filterValue) => {\r\n        let valueString = \"\";\r\n\r\n        Object.values(value).forEach((value) => {\r\n            valueString += value;\r\n        });\r\n\r\n        const filterString = filterValue.replace(\" \", \"\");\r\n\r\n\r\n        return valueString\r\n            .toLocaleLowerCase()\r\n            .includes(filterString.toLocaleLowerCase());\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const filteredRows = data.filter((value) =>\r\n            filter(value, searchText)\r\n        );\r\n        setFilteredRows(filteredRows);\r\n        // eslint-disable-next-line\r\n    }, [searchText, data, filter]);\r\n\r\n    return (\r\n        <TableContainer component={Paper}>\r\n            <Grid container>\r\n                <Grid item xs={2}></Grid>\r\n                <Grid item xs={9}>\r\n                    <SearchField\r\n                        searchText={searchText}\r\n                        setSearchText={setSearchText}\r\n                        style={classes.searchField}\r\n                        styleIcon={classes.styleIcon}\r\n                    />\r\n                    <Table className={classes.table}>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                {headCells.map((headCell) => (\r\n                                    <TableCell\r\n                                        align={\"inherit\"}\r\n                                        className={classes.cell}\r\n                                        padding={\"checkbox\"}\r\n                                        size={\"medium\"}\r\n                                        sortDirection={\"desc\"}\r\n                                        variant={\"head\"}\r\n                                    >\r\n                                        <b>{headCell.label}</b>\r\n                                    </TableCell>\r\n                                ))}\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {filteredRows.map((row) => {\r\n                                return (\r\n                                    <TableRow>\r\n                                        {Object.values(row).map((value) => {\r\n                                            if (value.length >= 30) {\r\n                                                return (\r\n                                                    <TableCell className={classes.headCell} title={value}>{value.substring(0, 12) + \"...\"}</TableCell>\r\n                                                )\r\n                                            } else {\r\n                                                return (\r\n                                                    <TableCell className={classes.headCell}>{value}</TableCell>\r\n                                                )\r\n                                            }\r\n\r\n                                        })}\r\n                                        <IconButton\r\n                                            aria-label=\"edit\"\r\n                                            onClick={() => {\r\n                                                setItemToEdit(row);\r\n                                                dialogHandlerEdit();\r\n                                            }}\r\n                                            edge={\"end\"}\r\n                                            title={\"Edit user \" + row.username}\r\n                                        >\r\n                                            <EditIcon style={{ color: \"#355A20\" }} />\r\n                                        </IconButton>\r\n                                        <IconButton\r\n                                            aria-label=\"delete\"\r\n                                            onClick={() => {\r\n                                                setItemToDelete(row);\r\n                                                dialogHandlerDelete();\r\n                                            }}\r\n                                            edge={\"end\"}\r\n                                            title={\"Delete user \" + row.username}\r\n                                        >\r\n                                            <DeleteIcon style={{ color: \"red\" }} />\r\n                                        </IconButton>\r\n                                    </TableRow>\r\n                                )\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </Grid>\r\n                <Grid item xs={1}></Grid>\r\n            </Grid>\r\n            <OwnDialog\r\n                isOpen={openDelete}\r\n                handler={dialogHandlerDelete}\r\n                mode={'delete'}\r\n                titleDialog={\"Delete user '\" + itemToDelete.username + \"'?\"}\r\n                action={deleteUser}\r\n            />\r\n            <OwnDialog\r\n                isOpen={openEdit}\r\n                handler={dialogHandlerEdit}\r\n                mode={'editUser'}\r\n                titleDialog={\"Edit user '\" + itemToEdit.username + \"'\"}\r\n                action={changeUser}\r\n                user={itemToEdit}\r\n            />\r\n        </TableContainer>\r\n\r\n    );\r\n};\r\nexport default OwnTable;"]},"metadata":{},"sourceType":"module"}